var n=function(e){e.preventDefault()};function e(e){var o=jQuery(".llms-complete-lesson-form"),t=jQuery('.llms-complete-lesson-form button[type="submit"]'),l=jQuery("#llms_start_quiz, #llms-start-assignment");!0===e?(o.off("submit",n),t.removeAttr("disabled"),l.removeClass("llms-av-disabled").off("click",n)):(o.on("submit",n),t.attr("disabled","disabled"),l.addClass("llms-av-disabled").on("click",n))}var l=function(e){return{ts:e.currentTime,duration:e.duration,url:e.source,provider:e.provider,id:e.config.id}},o=function(e,n){llms.tracking.addEvent("video."+e,{meta:n})},t=function(e){var n=l(e.detail.plyr);o("paused",n)},i=function(e){var n=l(e.detail.plyr);o(n.ts<1?"started":"played",n)},s=function(n,t,i){var s=l(n.detail.plyr);o("ended",s),function(e,n){LLMS.Ajax.call({data:{action:"llms_av_video_ended",id:n.post_id,nonce:n.nonce},beforeSend:function(){LLMS.Spinner.start(e)},error:function(n,o,t){LLMS.Spinner.stop(e),console.error(n.responseText+" ("+t+" "+o+")"),console.log(n)},success:function(n){LLMS.Spinner.stop(e),null!=n&&n.html&&(e.append(n.html),function(e){var n,o=e.find(".llms-av-pv--seconds");setInterval((function(){1==(n=1*o.text()-1)&&o.closest("a")[0].click(),n>=0&&o.text(n)}),1e3)}(e))}})}(t,i),e(!0)};function u(n){var o,l,r={},a=(null===(o=llms)||void 0===o||null===(l=o.tracking)||void 0===l?void 0:l.getSettings())||null;null!=a&&a.av&&(r=a.av),r.require_video_completion&&!r.video_completed&&e(!1);var d=jQuery(".presto-block-video");n.on("pause",t),n.on("playing",i),n.on("ended",(function(e){return s(e,d,r)}))}export default u;export{s as onEndedVideo,t as onPauseVideo,i as onPlayingVideo};
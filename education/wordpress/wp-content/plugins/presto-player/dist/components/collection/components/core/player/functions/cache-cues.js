import is from"./is";import{vttToJson}from"./search-vtt";export default function cacheCues(e){var t,r;if(!(null===(r=null===(t=e.config.preset)||void 0===t?void 0:t.search)||void 0===r?void 0:r.enabled))return;if(0===e.media.textTracks.length)return;if(-1!==e.currentTrack)return;e.toggleCaptions(!0);let o=setInterval((()=>{var t;const r=null===(t=e.media.textTracks[0])||void 0===t?void 0:t.cues;(null==r?void 0:r.length)>0&&(setCues(e),e.toggleCaptions(!1),clearInterval(o))}),200)}export function getCues(e){if(!e)return;const t="presto-player-"+e.id+"-cues",r=localStorage.getItem(t);return is.empty(r)?"":JSON.parse(r)}export function setCues(e){var t,r,o;if(!e)return;if(!(null===(t=null==e?void 0:e.media)||void 0===t?void 0:t.textTracks)||0===(null===(o=null===(r=null==e?void 0:e.media)||void 0===r?void 0:r.textTracks)||void 0===o?void 0:o.length))return;const i="presto-player-"+e.id+"-cues",n=vttToJson(e.media.textTracks[0]);localStorage.setItem(i,JSON.stringify(n))}